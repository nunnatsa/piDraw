<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="740px" preserveAspectRatio="none" style="width:1089px;height:740px;" version="1.1" viewBox="0 0 1089 740" width="1089px" zoomAndPan="magnify"><defs><filter height="300%" id="f16p8rmrn1b8aq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[7623cd3a7304b0842048101652fe2647]
cluster datatype--><polygon fill="#FFFFFF" filter="url(#f16p8rmrn1b8aq)" points="802,650,877,650,884,672.2969,887,672.2969,887,733,802,733,802,650" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="802" x2="884" y1="672.2969" y2="672.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="69" x="806" y="664.9951">datatype</text><!--MD5=[588c463f218493110eb7fbaaa6e40c41]
cluster canvas--><polygon fill="#FFFFFF" filter="url(#f16p8rmrn1b8aq)" points="485,204,546,204,553,226.2969,994,226.2969,994,625,485,625,485,204" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="485" x2="553" y1="226.2969" y2="226.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="55" x="489" y="218.9951">canvas</text><!--MD5=[dbbd9b086b33c67a7e908e807cc7146c]
cluster notifier--><polygon fill="#FFFFFF" filter="url(#f16p8rmrn1b8aq)" points="267,229.5,330,229.5,337,251.7969,477,251.7969,477,574,267,574,267,229.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="267" x2="337" y1="251.7969" y2="251.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="57" x="271" y="244.4951">notifier</text><!--MD5=[08cfbaecb6317b1e15f6360cd8b42728]
cluster http--><polygon fill="#FFFFFF" filter="url(#f16p8rmrn1b8aq)" points="25,268,63,268,70,290.2969,249,290.2969,249,351,25,351,25,268" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="25" x2="70" y1="290.2969" y2="290.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32" x="29" y="282.9951">http</text><!--MD5=[35dd84c23ad91445a3974d1258f96446]
cluster webapp--><polygon fill="#FFFFFF" filter="url(#f16p8rmrn1b8aq)" points="16,25.5,85,25.5,92,47.7969,377,47.7969,377,159.5,16,159.5,16,25.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="92" y1="47.7969" y2="47.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="63" x="20" y="40.4951">webapp</text><!--MD5=[10ea673caf457862023e152271927b45]
cluster controller--><polygon fill="#FFFFFF" filter="url(#f16p8rmrn1b8aq)" points="614,6,697,6,704,28.2969,906,28.2969,906,179,614,179,614,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="614" x2="704" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="77" x="618" y="20.9951">controller</text><!--MD5=[1f3a544d7024909bf44d5cb1e29d76b4]
cluster hat--><polygon fill="#FFFFFF" filter="url(#f16p8rmrn1b8aq)" points="1002,268,1033,268,1040,290.2969,1072,290.2969,1072,351,1002,351,1002,268" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1002" x2="1040" y1="290.2969" y2="290.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="25" x="1006" y="282.9951">hat</text><!--MD5=[12d58735ad6c6314144f13768f68bf64]
class datatype.Color--><rect codeLine="2" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="48" id="datatype.Color" style="stroke:#A80036;stroke-width:1.5;" width="64" x="812" y="677"/><ellipse cx="827" cy="693" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M829.9688,698.6406 Q829.3906,698.9375 828.75,699.0781 Q828.1094,699.2344 827.4063,699.2344 Q824.9063,699.2344 823.5781,697.5938 Q822.2656,695.9375 822.2656,692.8125 Q822.2656,689.6875 823.5781,688.0313 Q824.9063,686.375 827.4063,686.375 Q828.1094,686.375 828.75,686.5313 Q829.4063,686.6875 829.9688,686.9844 L829.9688,689.7031 Q829.3438,689.125 828.75,688.8594 Q828.1563,688.5781 827.5313,688.5781 Q826.1875,688.5781 825.5,689.6563 Q824.8125,690.7188 824.8125,692.8125 Q824.8125,694.9063 825.5,695.9844 Q826.1875,697.0469 827.5313,697.0469 Q828.1563,697.0469 828.75,696.7813 Q829.3438,696.5 829.9688,695.9219 L829.9688,698.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="32" x="841" y="697.1543">Color</text><line style="stroke:#A80036;stroke-width:1.5;" x1="813" x2="875" y1="709" y2="709"/><line style="stroke:#A80036;stroke-width:1.5;" x1="813" x2="875" y1="717" y2="717"/><!--MD5=[5c8291e5868f8f7337e1ce5cb116bef8]
class canvas.Canvas--><rect codeLine="4" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="99.2188" id="canvas.Canvas" style="stroke:#A80036;stroke-width:1.5;" width="116" x="870" y="492.5"/><ellipse cx="902.55" cy="508.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M905.5188,514.1406 Q904.9406,514.4375 904.3,514.5781 Q903.6594,514.7344 902.9563,514.7344 Q900.4563,514.7344 899.1281,513.0938 Q897.8156,511.4375 897.8156,508.3125 Q897.8156,505.1875 899.1281,503.5313 Q900.4563,501.875 902.9563,501.875 Q903.6594,501.875 904.3,502.0313 Q904.9563,502.1875 905.5188,502.4844 L905.5188,505.2031 Q904.8938,504.625 904.3,504.3594 Q903.7063,504.0781 903.0813,504.0781 Q901.7375,504.0781 901.05,505.1563 Q900.3625,506.2188 900.3625,508.3125 Q900.3625,510.4063 901.05,511.4844 Q901.7375,512.5469 903.0813,512.5469 Q903.7063,512.5469 904.3,512.2813 Q904.8938,512 905.5188,511.4219 L905.5188,514.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="45" x="920.45" y="512.6543">Canvas</text><line style="stroke:#A80036;stroke-width:1.5;" x1="871" x2="985" y1="524.5" y2="524.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="99" x="876" y="538.7104">datatype.Color[][]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="871" x2="985" y1="545.3047" y2="545.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="876" y="559.5151">Set(cr *Cursor)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="876" y="572.3198">Delete(cr *Cursor)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="876" y="585.1245">Reset()</text><!--MD5=[e913e7da6c35842ef9edbd43f9863f8a]
class canvas.Board--><rect codeLine="28" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="176.0469" id="canvas.Board" style="stroke:#A80036;stroke-width:1.5;" width="144" x="688" y="231"/><ellipse cx="737.25" cy="247" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M740.2188,252.6406 Q739.6406,252.9375 739,253.0781 Q738.3594,253.2344 737.6563,253.2344 Q735.1563,253.2344 733.8281,251.5938 Q732.5156,249.9375 732.5156,246.8125 Q732.5156,243.6875 733.8281,242.0313 Q735.1563,240.375 737.6563,240.375 Q738.3594,240.375 739,240.5313 Q739.6563,240.6875 740.2188,240.9844 L740.2188,243.7031 Q739.5938,243.125 739,242.8594 Q738.4063,242.5781 737.7813,242.5781 Q736.4375,242.5781 735.75,243.6563 Q735.0625,244.7188 735.0625,246.8125 Q735.0625,248.9063 735.75,249.9844 Q736.4375,251.0469 737.7813,251.0469 Q738.4063,251.0469 739,250.7813 Q739.5938,250.5 740.2188,249.9219 L740.2188,252.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="37" x="757.75" y="251.1543">Board</text><line style="stroke:#A80036;stroke-width:1.5;" x1="689" x2="831" y1="263" y2="263"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="694" y="277.2104">Canvas canvas.Canvas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="694" y="290.0151">Cursor canvas.Cursor</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="694" y="302.8198">Window canvas.Window</text><line style="stroke:#A80036;stroke-width:1.5;" x1="689" x2="831" y1="309.4141" y2="309.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="52" x="694" y="323.6245">MoveUp()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="694" y="336.4292">MoveDown()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58" x="694" y="349.2339">MoveLeft()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="694" y="362.0386">MoveRight()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="694" y="374.8433">DrawPixel()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="694" y="387.6479">DeletePixel()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="694" y="400.4526">Reset()</text><!--MD5=[75a78c80d57ad66b781a53a02066829b]
class canvas.Cursor--><rect codeLine="17" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="150.4375" id="canvas.Cursor" style="stroke:#A80036;stroke-width:1.5;" width="157" x="493.5" y="467"/><ellipse cx="547.25" cy="483" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M550.2188,488.6406 Q549.6406,488.9375 549,489.0781 Q548.3594,489.2344 547.6563,489.2344 Q545.1563,489.2344 543.8281,487.5938 Q542.5156,485.9375 542.5156,482.8125 Q542.5156,479.6875 543.8281,478.0313 Q545.1563,476.375 547.6563,476.375 Q548.3594,476.375 549,476.5313 Q549.6563,476.6875 550.2188,476.9844 L550.2188,479.7031 Q549.5938,479.125 549,478.8594 Q548.4063,478.5781 547.7813,478.5781 Q546.4375,478.5781 545.75,479.6563 Q545.0625,480.7188 545.0625,482.8125 Q545.0625,484.9063 545.75,485.9844 Q546.4375,487.0469 547.7813,487.0469 Q548.4063,487.0469 549,486.7813 Q549.5938,486.5 550.2188,485.9219 L550.2188,488.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="567.75" y="487.1543">Cursor</text><line style="stroke:#A80036;stroke-width:1.5;" x1="494.5" x2="649.5" y1="499" y2="499"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="499.5" y="513.2104">x uint8</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="499.5" y="526.0151">y uint8</text><line style="stroke:#A80036;stroke-width:1.5;" x1="494.5" x2="649.5" y1="532.6094" y2="532.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="52" x="499.5" y="546.8198">MoveUp()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="499.5" y="559.6245">MoveDown()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58" x="499.5" y="572.4292">MoveLeft()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="499.5" y="585.2339">MoveRight()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="140" x="499.5" y="598.0386">SetColor(datatype.Color)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="499.5" y="610.8433">GetColor() datatype.Color</text><!--MD5=[194164210cee97d7d3d7fa52edb2ea80]
class canvas.Window--><rect codeLine="41" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="86.4141" id="canvas.Window" style="stroke:#A80036;stroke-width:1.5;" width="149" x="685.5" y="499"/><ellipse cx="732.25" cy="515" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M735.2188,520.6406 Q734.6406,520.9375 734,521.0781 Q733.3594,521.2344 732.6563,521.2344 Q730.1563,521.2344 728.8281,519.5938 Q727.5156,517.9375 727.5156,514.8125 Q727.5156,511.6875 728.8281,510.0313 Q730.1563,508.375 732.6563,508.375 Q733.3594,508.375 734,508.5313 Q734.6563,508.6875 735.2188,508.9844 L735.2188,511.7031 Q734.5938,511.125 734,510.8594 Q733.4063,510.5781 732.7813,510.5781 Q731.4375,510.5781 730.75,511.6563 Q730.0625,512.7188 730.0625,514.8125 Q730.0625,516.9063 730.75,517.9844 Q731.4375,519.0469 732.7813,519.0469 Q733.4063,519.0469 734,518.7813 Q734.5938,518.5 735.2188,517.9219 L735.2188,520.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="752.75" y="519.1543">Window</text><line style="stroke:#A80036;stroke-width:1.5;" x1="686.5" x2="833.5" y1="531" y2="531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="691.5" y="545.2104">x uint8</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="691.5" y="558.0151">y uint8</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="691.5" y="570.8198">Matrix [][]datatype.Color</text><line style="stroke:#A80036;stroke-width:1.5;" x1="686.5" x2="833.5" y1="577.4141" y2="577.4141"/><!--MD5=[5de9db107e3212582b086b95d3c4d63a]
class notifier.Notifier--><rect codeLine="51" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="124.8281" id="notifier.Notifier" style="stroke:#A80036;stroke-width:1.5;" width="193" x="275.5" y="256.5"/><ellipse cx="345.25" cy="272.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M348.2188,278.1406 Q347.6406,278.4375 347,278.5781 Q346.3594,278.7344 345.6563,278.7344 Q343.1563,278.7344 341.8281,277.0938 Q340.5156,275.4375 340.5156,272.3125 Q340.5156,269.1875 341.8281,267.5313 Q343.1563,265.875 345.6563,265.875 Q346.3594,265.875 347,266.0313 Q347.6563,266.1875 348.2188,266.4844 L348.2188,269.2031 Q347.5938,268.625 347,268.3594 Q346.4063,268.0781 345.7813,268.0781 Q344.4375,268.0781 343.75,269.1563 Q343.0625,270.2188 343.0625,272.3125 Q343.0625,274.4063 343.75,275.4844 Q344.4375,276.5469 345.7813,276.5469 Q346.4063,276.5469 347,276.2813 Q347.5938,276 348.2188,275.4219 L348.2188,278.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="45" x="365.75" y="276.6543">Notifier</text><line style="stroke:#A80036;stroke-width:1.5;" x1="276.5" x2="467.5" y1="288.5" y2="288.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="181" x="281.5" y="302.7104">clientMap map[int64]chan []byte</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="122" x="281.5" y="315.5151">idp notifier.idProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="276.5" x2="467.5" y1="322.1094" y2="322.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="177" x="281.5" y="336.3198">Subscribe(ch chan []byte) int64</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="281.5" y="349.1245">Unsubscribe(id int64)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="281.5" y="361.9292">Notify(data []byte)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="174" x="281.5" y="374.7339">NotifyOne(id int64, data []byte)</text><!--MD5=[2a01e07b9292ec9f1b80b02424844a73]
class notifier.idProvider--><rect codeLine="49" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="48" id="notifier.idProvider" style="stroke:#A80036;stroke-width:1.5;" width="94" x="325" y="518"/><ellipse cx="340" cy="534" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M342.9688,539.6406 Q342.3906,539.9375 341.75,540.0781 Q341.1094,540.2344 340.4063,540.2344 Q337.9063,540.2344 336.5781,538.5938 Q335.2656,536.9375 335.2656,533.8125 Q335.2656,530.6875 336.5781,529.0313 Q337.9063,527.375 340.4063,527.375 Q341.1094,527.375 341.75,527.5313 Q342.4063,527.6875 342.9688,527.9844 L342.9688,530.7031 Q342.3438,530.125 341.75,529.8594 Q341.1563,529.5781 340.5313,529.5781 Q339.1875,529.5781 338.5,530.6563 Q337.8125,531.7188 337.8125,533.8125 Q337.8125,535.9063 338.5,536.9844 Q339.1875,538.0469 340.5313,538.0469 Q341.1563,538.0469 341.75,537.7813 Q342.3438,537.5 342.9688,536.9219 L342.9688,539.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="354" y="538.1543">idProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="326" x2="418" y1="550" y2="550"/><line style="stroke:#A80036;stroke-width:1.5;" x1="326" x2="418" y1="558" y2="558"/><!--MD5=[0a6d5fcb8ed0d74a874d5757e6cf1224]
class http.Handler--><rect codeLine="60" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="48" id="http.Handler" style="stroke:#A80036;stroke-width:1.5;" width="81" x="33.5" y="295"/><ellipse cx="48.5" cy="311" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M44.4219,306.7656 L44.4219,304.6094 L51.8125,304.6094 L51.8125,306.7656 L49.3438,306.7656 L49.3438,314.8438 L51.8125,314.8438 L51.8125,317 L44.4219,317 L44.4219,314.8438 L46.8906,314.8438 L46.8906,306.7656 L44.4219,306.7656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="49" x="62.5" y="315.1543">Handler</text><line style="stroke:#A80036;stroke-width:1.5;" x1="34.5" x2="113.5" y1="327" y2="327"/><line style="stroke:#A80036;stroke-width:1.5;" x1="34.5" x2="113.5" y1="335" y2="335"/><!--MD5=[585944afcaa19872aef68abc96b6658d]
class http.ServeMux--><rect codeLine="61" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="48" id="http.ServeMux" style="stroke:#A80036;stroke-width:1.5;" width="91" x="149.5" y="295"/><ellipse cx="164.5" cy="311" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M167.4688,316.6406 Q166.8906,316.9375 166.25,317.0781 Q165.6094,317.2344 164.9063,317.2344 Q162.4063,317.2344 161.0781,315.5938 Q159.7656,313.9375 159.7656,310.8125 Q159.7656,307.6875 161.0781,306.0313 Q162.4063,304.375 164.9063,304.375 Q165.6094,304.375 166.25,304.5313 Q166.9063,304.6875 167.4688,304.9844 L167.4688,307.7031 Q166.8438,307.125 166.25,306.8594 Q165.6563,306.5781 165.0313,306.5781 Q163.6875,306.5781 163,307.6563 Q162.3125,308.7188 162.3125,310.8125 Q162.3125,312.9063 163,313.9844 Q163.6875,315.0469 165.0313,315.0469 Q165.6563,315.0469 166.25,314.7813 Q166.8438,314.5 167.4688,313.9219 L167.4688,316.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="178.5" y="315.1543">ServeMux</text><line style="stroke:#A80036;stroke-width:1.5;" x1="150.5" x2="239.5" y1="327" y2="327"/><line style="stroke:#A80036;stroke-width:1.5;" x1="150.5" x2="239.5" y1="335" y2="335"/><!--MD5=[619d5d7e99a0990cf96fedb3518392dc]
class webapp.index--><rect codeLine="67" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="60.8047" id="webapp.index" style="stroke:#A80036;stroke-width:1.5;" width="100" x="24" y="71.5"/><ellipse cx="54.75" cy="87.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M57.7188,93.1406 Q57.1406,93.4375 56.5,93.5781 Q55.8594,93.7344 55.1563,93.7344 Q52.6563,93.7344 51.3281,92.0938 Q50.0156,90.4375 50.0156,87.3125 Q50.0156,84.1875 51.3281,82.5313 Q52.6563,80.875 55.1563,80.875 Q55.8594,80.875 56.5,81.0313 Q57.1563,81.1875 57.7188,81.4844 L57.7188,84.2031 Q57.0938,83.625 56.5,83.3594 Q55.9063,83.0781 55.2813,83.0781 Q53.9375,83.0781 53.25,84.1563 Q52.5625,85.2188 52.5625,87.3125 Q52.5625,89.4063 53.25,90.4844 Q53.9375,91.5469 55.2813,91.5469 Q55.9063,91.5469 56.5,91.2813 Q57.0938,91 57.7188,90.4219 L57.7188,93.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="33" x="72.25" y="91.6543">index</text><line style="stroke:#A80036;stroke-width:1.5;" x1="25" x2="123" y1="103.5" y2="103.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="25" x2="123" y1="111.5" y2="111.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88" x="30" y="125.7104">ServeHTTP(w,r)</text><!--MD5=[d99dc924830e9fb5bb4b2cc4fdbaf350]
class webapp.ClientActions--><rect codeLine="70" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="99.2188" id="webapp.ClientActions" style="stroke:#A80036;stroke-width:1.5;" width="209" x="159.5" y="52.5"/><ellipse cx="219.25" cy="68.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M222.2188,74.1406 Q221.6406,74.4375 221,74.5781 Q220.3594,74.7344 219.6563,74.7344 Q217.1563,74.7344 215.8281,73.0938 Q214.5156,71.4375 214.5156,68.3125 Q214.5156,65.1875 215.8281,63.5313 Q217.1563,61.875 219.6563,61.875 Q220.3594,61.875 221,62.0313 Q221.6563,62.1875 222.2188,62.4844 L222.2188,65.2031 Q221.5938,64.625 221,64.3594 Q220.4063,64.0781 219.7813,64.0781 Q218.4375,64.0781 217.75,65.1563 Q217.0625,66.2188 217.0625,68.3125 Q217.0625,70.4063 217.75,71.4844 Q218.4375,72.5469 219.7813,72.5469 Q220.4063,72.5469 221,72.2813 Q221.5938,72 222.2188,71.4219 L222.2188,74.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="239.75" y="72.6543">ClientActions</text><line style="stroke:#A80036;stroke-width:1.5;" x1="160.5" x2="367.5" y1="84.5" y2="84.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="131" x="165.5" y="98.7104">mux     *http.ServeMux</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="165.5" y="111.5151">mailbox *notifier.Notifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="197" x="165.5" y="124.3198">ch      chan&lt;- datatype.ClientEvent</text><line style="stroke:#A80036;stroke-width:1.5;" x1="160.5" x2="367.5" y1="130.9141" y2="130.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="141" x="165.5" y="145.1245">GetMux() *http.ServeMux</text><!--MD5=[15a8035d1e28afc48d32ecfa9945c3ad]
class controller.Controller--><rect codeLine="81" fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="137.6328" id="controller.Controller" style="stroke:#A80036;stroke-width:1.5;" width="275" x="622.5" y="33"/><ellipse cx="725.25" cy="49" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M728.2188,54.6406 Q727.6406,54.9375 727,55.0781 Q726.3594,55.2344 725.6563,55.2344 Q723.1563,55.2344 721.8281,53.5938 Q720.5156,51.9375 720.5156,48.8125 Q720.5156,45.6875 721.8281,44.0313 Q723.1563,42.375 725.6563,42.375 Q726.3594,42.375 727,42.5313 Q727.6563,42.6875 728.2188,42.9844 L728.2188,45.7031 Q727.5938,45.125 727,44.8594 Q726.4063,44.5781 725.7813,44.5781 Q724.4375,44.5781 723.75,45.6563 Q723.0625,46.7188 723.0625,48.8125 Q723.0625,50.9063 723.75,51.9844 Q724.4375,53.0469 725.7813,53.0469 Q726.4063,53.0469 727,52.7813 Q727.5938,52.5 728.2188,51.9219 L728.2188,54.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61" x="745.75" y="53.1543">Controller</text><line style="stroke:#A80036;stroke-width:1.5;" x1="623.5" x2="896.5" y1="65" y2="65"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="149" x="628.5" y="79.2104">board        *canvas.Board</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="628.5" y="92.0151">theHat       *hat.Hat</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="206" x="628.5" y="104.8198">hatEvents    chan datatype.HatEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="263" x="628.5" y="117.6245">screenEvents chan *datatype.DisplayMessage</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="219" x="628.5" y="130.4292">clientEvents chan datatype.ClientEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="159" x="628.5" y="143.2339">mailbox      *notifier.Notifier</text><line style="stroke:#A80036;stroke-width:1.5;" x1="623.5" x2="896.5" y1="149.8281" y2="149.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="628.5" y="164.0386">Start()</text><!--MD5=[e9fba0fdaa441380737c4ab1555febfb]
class hat.Hat--><rect fill="#FEFECE" filter="url(#f16p8rmrn1b8aq)" height="48" id="hat.Hat" style="stroke:#A80036;stroke-width:1.5;" width="54" x="1010" y="295"/><ellipse cx="1025" cy="311" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1027.9688,316.6406 Q1027.3906,316.9375 1026.75,317.0781 Q1026.1094,317.2344 1025.4063,317.2344 Q1022.9063,317.2344 1021.5781,315.5938 Q1020.2656,313.9375 1020.2656,310.8125 Q1020.2656,307.6875 1021.5781,306.0313 Q1022.9063,304.375 1025.4063,304.375 Q1026.1094,304.375 1026.75,304.5313 Q1027.4063,304.6875 1027.9688,304.9844 L1027.9688,307.7031 Q1027.3438,307.125 1026.75,306.8594 Q1026.1563,306.5781 1025.5313,306.5781 Q1024.1875,306.5781 1023.5,307.6563 Q1022.8125,308.7188 1022.8125,310.8125 Q1022.8125,312.9063 1023.5,313.9844 Q1024.1875,315.0469 1025.5313,315.0469 Q1026.1563,315.0469 1026.75,314.7813 Q1027.3438,314.5 1027.9688,313.9219 L1027.9688,316.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="22" x="1039" y="315.1543">Hat</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1011" x2="1063" y1="327" y2="327"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1011" x2="1063" y1="335" y2="335"/><!--MD5=[6952cd89be22c2145e2f4a616d7e3f6a]
reverse link canvas.Board to canvas.Canvas--><path codeLine="11" d="M834.3899,417.7437 C853.8479,443.5719 874.0029,470.3252 890.6045,492.3619 " fill="none" id="canvas.Board-backto-canvas.Canvas" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="826.398,407.1355,826.8135,414.3346,833.6186,416.72,833.2031,409.5209,826.398,407.1355" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="823.5653" y="427.1258">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="876.7833" y="481.3877">1</text><!--MD5=[5733ad54cc6a841cc7c1b15917a4796f]
reverse link canvas.Board to canvas.Cursor--><path codeLine="12" d="M679.2675,414.7625 C664.5822,432.1818 649.456,450.1241 635.3616,466.8424 " fill="none" id="canvas.Board-backto-canvas.Cursor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="687.852,404.5799,680.9264,406.589,680.1172,413.7545,687.0428,411.7455,687.852,404.5799" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="671.9992" y="409.7032">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="633.0195" y="456.0165">1</text><!--MD5=[b390a090fa9377eec080759f66c39266]
reverse link canvas.Board to canvas.Window--><path codeLine="13" d="M760,420.1873 C760,447.8511 760,476.3688 760,498.8506 " fill="none" id="canvas.Board-backto-canvas.Window" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="760,407.1355,756,413.1355,760,419.1355,764,413.1355,760,407.1355" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="751.6688" y="427.1258">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="751.3625" y="487.8228">1</text><!--MD5=[1bd19ad27f40df6d842fbfce2439baf5]
reverse link canvas.Canvas to datatype.Color--><path codeLine="14" d="M895.5684,603.3884 C882.0666,628.9454 867.1714,657.1398 856.8757,676.6281 " fill="none" id="canvas.Canvas-backto-datatype.Color" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="901.6523,591.8723,895.3128,595.309,896.0469,602.4826,902.3864,599.0459,901.6523,591.8723" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[452469374e133d3a87d1c608f466c965]
reverse link canvas.Window to datatype.Color--><path codeLine="15" d="M788.9435,596.7859 C803.3282,624.0141 819.9818,655.537 831.1737,676.7216 " fill="none" id="canvas.Window-backto-datatype.Color" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="782.7316,585.0277,781.9976,592.2013,788.3371,595.638,789.0711,588.4644,782.7316,585.0277" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a6672210dbf6363b986ba5f4253fe39e]
reverse link notifier.Notifier to notifier.idProvider--><path codeLine="47" d="M372,394.7477 C372,437.6768 372,488.5134 372,517.8328 " fill="none" id="notifier.Notifier-backto-notifier.idProvider" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="372,381.7114,368,387.7114,372,393.7114,376,387.7114,372,381.7114" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="363.5625" y="401.4743">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="362.975" y="506.802">1</text><!--MD5=[1a72a0d6edea95fe09b2a4504d02f1fc]
reverse link http.Handler to webapp.index--><path codeLine="63" d="M74,274.8605 C74,232.5326 74,169.7391 74,132.6306 " fill="none" id="http.Handler-backto-webapp.index" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="81.0001,274.8853,74,294.8853,67.0001,274.8852,81.0001,274.8853" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[514636feab4d28dd692d93153947990c]
reverse link webapp.ClientActions to http.ServeMux--><path codeLine="64" d="M244.2815,164.0133 C230.4339,207.563 212.6683,263.4345 202.6912,294.8118 " fill="none" id="webapp.ClientActions-backto-http.ServeMux" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="248.2565,151.5122,242.6264,156.0179,244.6201,162.948,250.2502,158.4422,248.2565,151.5122" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="237.3567" y="171.9465">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="195.6371" y="283.7756">1</text><!--MD5=[c1e612aeeadc73c68afc4d54c924fa07]
reverse link webapp.ClientActions to notifier.Notifier--><path codeLine="65" d="M294.463,163.2081 C308.9694,192.3551 326.2932,227.1632 340.8828,256.4774 " fill="none" id="webapp.ClientActions-backto-notifier.Notifier" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="288.642,151.5122,287.7344,158.666,293.9888,162.2552,294.8964,155.1014,288.642,151.5122" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="283.6738" y="171.9465">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="328.8224" y="245.4655">1</text><!--MD5=[7559edfd06809307419a40f50f1f1218]
reverse link controller.Controller to notifier.Notifier--><path codeLine="77" d="M609.7217,141.0693 C564.8542,156.6183 517.008,177.3064 477,204 C455.7477,218.1797 435.8777,237.5612 419.2655,256.372 " fill="none" id="controller.Controller-backto-notifier.Notifier" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="622.2887,136.8193,615.3235,134.9524,610.9212,140.6638,617.8864,142.5307,622.2887,136.8193" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="606.5389" y="135.3939">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="416.2681" y="245.348">1</text><!--MD5=[9ae6a99ebeeb92959b14a68d7af3b32d]
reverse link controller.Controller to hat.Hat--><path codeLine="78" d="M909.7571,141.2759 C943.8168,156.1983 977.2166,176.5104 1002,204 C1024.9177,229.4203 1032.8361,269.4669 1035.5677,294.9673 " fill="none" id="controller.Controller-backto-hat.Hat" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="897.6953,136.2195,901.6823,142.2282,908.7622,140.8589,904.7752,134.8502,897.6953,136.2195" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="905.4443" y="134.7613">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1026.1757" y="283.971">1</text><!--MD5=[dbba5b25e08c55a30e14bf8c7e77d88f]
reverse link controller.Controller to canvas.Board--><path codeLine="79" d="M760,184.4081 C760,199.6236 760,215.5668 760,230.9419 " fill="none" id="controller.Controller-backto-canvas.Board" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="760,171.2568,756,177.2568,760,183.2568,764,177.2568,760,171.2568" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="751.6188" y="190.6634">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="760.3438" y="219.8005">1</text><!--MD5=[8667c3b7770ad8b7361648dc1d5c9a03]
@startuml
'https://plantuml.com/class-diagram
class datatype.Color{}

class canvas.Canvas {
datatype.Color[][]
Set(cr *Cursor)
Delete(cr *Cursor)
Reset()
}

canvas.Board "1" o- - "1" canvas.Canvas
canvas.Board "1" o- - "1" canvas.Cursor
canvas.Board "1" o- - "1" canvas.Window
canvas.Canvas o- - datatype.Color
canvas.Window o- - datatype.Color

class canvas.Cursor {
x uint8
y uint8
MoveUp()
MoveDown()
MoveLeft()
MoveRight()
SetColor(datatype.Color)
GetColor() datatype.Color
}

class canvas.Board {
Canvas canvas.Canvas
Cursor canvas.Cursor
Window canvas.Window
MoveUp()
MoveDown()
MoveLeft()
MoveRight()
DrawPixel()
DeletePixel()
Reset()
}

class canvas.Window {
x uint8
y uint8
Matrix [][]datatype.Color
}

notifier.Notifier "1" o- - "1" notifier.idProvider

class notifier.idProvider {
}
class notifier.Notifier {
clientMap map[int64]chan []byte
idp notifier.idProvider
Subscribe(ch chan []byte) int64
Unsubscribe(id int64)
Notify(data []byte)
NotifyOne(id int64, data []byte)
}

interface http.Handler
class http.ServeMux{}

http.Handler <|- webapp.index
webapp.ClientActions "1" o- - "1" http.ServeMux
webapp.ClientActions "1" o- - "1" notifier.Notifier

class webapp.index {
ServeHTTP(w,r)
}
class webapp.ClientActions {
	mux     *http.ServeMux
	mailbox *notifier.Notifier
	ch      chan<- datatype.ClientEvent
	GetMux() *http.ServeMux
}

controller.Controller "1" o- - "1" notifier.Notifier
controller.Controller "1" o- - "1" hat.Hat
controller.Controller "1" o- - "1" canvas.Board

class controller.Controller {
	board        *canvas.Board
	theHat       *hat.Hat
	hatEvents    chan datatype.HatEvent
	screenEvents chan *datatype.DisplayMessage
	clientEvents chan datatype.ClientEvent
	mailbox      *notifier.Notifier
	Start()
}

@enduml

@startuml
class datatype.Color{}

class canvas.Canvas {
datatype.Color[][]
Set(cr *Cursor)
Delete(cr *Cursor)
Reset()
}

canvas.Board "1" o- - "1" canvas.Canvas
canvas.Board "1" o- - "1" canvas.Cursor
canvas.Board "1" o- - "1" canvas.Window
canvas.Canvas o- - datatype.Color
canvas.Window o- - datatype.Color

class canvas.Cursor {
x uint8
y uint8
MoveUp()
MoveDown()
MoveLeft()
MoveRight()
SetColor(datatype.Color)
GetColor() datatype.Color
}

class canvas.Board {
Canvas canvas.Canvas
Cursor canvas.Cursor
Window canvas.Window
MoveUp()
MoveDown()
MoveLeft()
MoveRight()
DrawPixel()
DeletePixel()
Reset()
}

class canvas.Window {
x uint8
y uint8
Matrix [][]datatype.Color
}

notifier.Notifier "1" o- - "1" notifier.idProvider

class notifier.idProvider {
}
class notifier.Notifier {
clientMap map[int64]chan []byte
idp notifier.idProvider
Subscribe(ch chan []byte) int64
Unsubscribe(id int64)
Notify(data []byte)
NotifyOne(id int64, data []byte)
}

interface http.Handler
class http.ServeMux{}

http.Handler <|- webapp.index
webapp.ClientActions "1" o- - "1" http.ServeMux
webapp.ClientActions "1" o- - "1" notifier.Notifier

class webapp.index {
ServeHTTP(w,r)
}
class webapp.ClientActions {
	mux     *http.ServeMux
	mailbox *notifier.Notifier
	ch      chan<- datatype.ClientEvent
	GetMux() *http.ServeMux
}

controller.Controller "1" o- - "1" notifier.Notifier
controller.Controller "1" o- - "1" hat.Hat
controller.Controller "1" o- - "1" canvas.Board

class controller.Controller {
	board        *canvas.Board
	theHat       *hat.Hat
	hatEvents    chan datatype.HatEvent
	screenEvents chan *datatype.DisplayMessage
	clientEvents chan datatype.ClientEvent
	mailbox      *notifier.Notifier
	Start()
}

@enduml

PlantUML version 1.2021.01(Tue Feb 02 09:55:08 IST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>